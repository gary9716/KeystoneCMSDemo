<!-- templates start -->
<script type="text/ng-template" id="product-layout-v1.html">
  <style>
  /* hide input number's arrows */
  input[type=number]::-webkit-inner-spin-button, 
  input[type=number]::-webkit-outer-spin-button { 
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      margin: 0; 
  }
  </style>
  
  <div class="thumbnail" style="padding: 5px 40px 20px;">
    <img src="{{::product.image}}" alt="" class="img-responsive">
    <div class="caption">
      <h4 class="pull-right">每包重{{::product.weight}}kg</h4>
      <h4><a class="clickable" ng-click="ctrler.viewDetail()">{{::product.name}}</a></h4>
      <div class="text-center">
        <h5 style="font-size: 23px;">價格方案</h5>
        <div>定價{{::product.marketPrice}}</div>
        <div>兌換價{{::product.exchangePrice}}</div>
        <div>折扣價{{::product.discountPrice}}</div>
      
        <div class="form-group form-inline" style="min-height: 3em; margin: 10px auto;">
          <label>{{product.isInCart?'已加包數':'欲加包數'}}：</label>
          <!-- quantity selector -->
          <div class="input-group number-spinner col-md-7" ng-hide="product.isInCart">
            <span class="input-group-btn data-dwn">
              <button class="btn btn-default btn-info" ng-click="ctrler.changeQty(product,-1);"><span class="fa fa-minus"></span></button>
            </span>
            <input type="number" ng-model="product.quantity" ng-model-options="{ debounce: 200 }" class="form-control text-center" min="1" required>
            <span class="input-group-btn data-up">
              <button class="btn btn-default btn-info" ng-click="ctrler.changeQty(product,1);"><span class="fa fa-plus"></span></button>
            </span>
          </div>
          <label class="input-group col-md-4" ng-hide="!product.isInCart">{{product.quantity}} 包</label>
        </div>
      </div>
    </div>
    
    <div class="btn-ground text-center">
        <button ng-hide="product.isInCart" ng-click="ctrler.addItemToCart(product)" type="button" class="btn btn-primary"><i class="fa fa-shopping-cart"></i> 加到購物車</button>
        <button ng-show="product.isInCart" ng-click="ctrler.rmItemFromCart(product)" type="button" class="btn btn-danger"><i class="fa fa-times"></i> 從購物車移除</button>
    </div>
  </div>
  
</script>
<!-- templates end -->

<!-- floating shopping cart
<button style="position:fixed; right:100px; top:100px;"><i class="fa fa-shopping-cart" aria-hidden="true"></i> 購物車</button>
-->
<div class="container">
  <!-- dont directly apply listTo2DMat filter to ng-repeat expression here. 
    it's unstable -->
  <div class="row" ng-repeat="productsPerRow in ctrler.products">
    <div class="col-md-4" ng-repeat="product in productsPerRow" ng-include="'product-layout-v1.html'"></div>
  </div>
</div> <!-- .container -->