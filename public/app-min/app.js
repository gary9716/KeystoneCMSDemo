!function(){"use strict";angular.module("mainApp",["ngAnimate","ui.router","ui.bootstrap","ngCart","LocalStorageModule","ngFileUpload"]).constant("appRootPath",("production"===locals.env?locals.appRootPath="/app-min/":locals.appRootPath="/app/",locals.appRootPath)).constant("cachedFarmersKey","mainApp:cachedFarmers"),angular.module("mainApp").config(["appRootPath","$stateProvider","$urlRouterProvider","localStorageServiceProvider",function(e,t,r,a){t.state({name:"home",templateUrl:e+"home/index.html",controller:"HomeCtrler as ctrler",url:"/"}).state({name:"farmer",templateUrl:e+"farmer/index.html",url:"/farmer"}).state({name:"farmerRegister",templateUrl:e+"farmer/register.html",url:"/farmer/register",controller:"FarmerPageCtrler as ctrler",resolve:{condition1:["myValidation",function(e){return e.checkPermission([{listName:"Farmer",opName:"create"}])}]}}).state({name:"farmerSearch",templateUrl:e+"farmer/search.html",url:"/farmer/search",controller:"FarmerPageCtrler as ctrler",resolve:{condition1:["myValidation",function(e){return e.checkPermission([{listName:"Farmer",opName:"read"}])}]}}).state({name:"farmerDetail",templateUrl:e+"farmer/detail.html",url:"/farmer/detail",params:{farmerPID:null},controller:"AccountPageCtrler as ctrler",resolve:{condition1:["myValidation",function(e){return e.checkPermission([{listName:"Farmer",opName:"read"},{listName:"Account",opName:"read"},{listName:"AccountRecord",opName:"read"}])}]}}).state({name:"product",templateUrl:e+"product/index.html",url:"/product"}).state({name:"productSell",templateUrl:e+"product/sell.html",url:"/product/sell",controller:"ProductPageCtrler as ctrler",resolve:{condition1:["myValidation",function(e){return e.checkPermission([{listName:"Product",opName:"read"},{listName:"Farmer",opName:"read"},{listName:"Account",opName:["read","update"]},{listName:"AccountRecord",opName:"create"},{listName:"Transaction",opName:"create"}])}]}}).state({name:"productManage",templateUrl:e+"product/manage.html",url:"/product/manage",controller:"ProductPageCtrler as ctrler",resolve:{condition1:["myValidation",function(e){return e.checkPermission([{listName:"Product",opName:["create","read","update","delete"]},{listName:"ProductType",opName:["create","read","update","delete"]}])}]}}).state({name:"statistics",templateUrl:e+"statistics/index.html",url:"/statistics"}).state({name:"transStatisData",templateUrl:e+"statistics/transaction-list.html",url:"/statistics/transaction",controller:"TransListPageCtrler as ctrler",resolve:{condition1:["myValidation",function(e){return e.checkPermission([{listName:"Transaction",opName:"read"},{listName:"AccountRecord",opName:"read"}])}]}}).state({name:"accRecStatisData",templateUrl:e+"statistics/acc-rec-aggregate.html",url:"/statistics/acc-rec-aggregate",controller:"AccRecAggPageCtrler as ctrler",resolve:{condition1:["myValidation",function(e){return e.checkPermission([{listName:"Transaction",opName:"read"},{listName:"AccountRecord",opName:"read"}])}]}}).state({name:"admin",templateUrl:e+"admin/index.html",url:"/admin-front",resolve:{condition1:["myValidation",function(e){return e.isAdmin(locals.user)}]}}).state({name:"adminAnnuallyWithdraw",templateUrl:e+"admin/annually-withdraw.html",url:"/admin-front/annually-withdraw",controller:"AnnuallyWithdrawPageCtrler as ctrler",resolve:{condition1:["myValidation",function(e){return e.isAdmin(locals.user)}]}}).state({name:"403",templateUrl:e+"error/403.html",url:"/error/403"}).onInvalid(function(e,t){return console.log("invalid state from ",t," to ",e),!1}),r.otherwise("/"),a.setPrefix("mainApp").setNotify(!1,!1)}]).run(["$state","$window","$http","$uibModal","$rootScope","$transitions","myValidation","cachedFarmersKey","appRootPath",function(e,t,r,a,o,n,l,i,c){console.log("config end, angular app start to run"),o.locals=locals,o.alerts=[],o.pubSuccessMsg=function(e){o.alerts.push({type:"success",msg:e})},o.pubWarningMsg=function(e){o.alerts.push({type:"warning",msg:e})},o.pubInfoMsg=function(e){o.alerts.push({type:"info",msg:e})},o.pubErrorMsg=function(e){o.alerts.push({type:"danger",msg:e})},o.isLogin=function(){return locals.user},o.isPage=function(t){return e.current.name===t},o.openShopCart=function(){o.productPageCtrler&&o.productPageCtrler.openShopCart()},o.openProductEdit=function(){o.productPageCtrler&&o.productPageCtrler.openProductEditModal()},o.openProductTypeEdit=function(){o.productTypePageCtrler&&o.productTypePageCtrler.openEditModal()},o.openCachedFarmerList=function(){var e=a.open({templateUrl:c+"farmer/farmerList.html",controller:"CachedFarmerListCtrler as ctrler",size:"lg"});e.result.catch(function(){e.close()})},n.onError({},function(t){t&&("access denied"===t.error().detail&&e.go("403"))}),o.loadDone=!0}])}();